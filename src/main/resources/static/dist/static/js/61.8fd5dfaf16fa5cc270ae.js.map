{"version":3,"sources":["webpack:///src/components/comment.vue","webpack:///./src/components/comment.vue?c378","webpack:///./src/components/comment.vue"],"names":["comment","name","data","value","userId","localStorage","getItem","orderId","this","$route","query","orderid","img","content","imgList","methods","choice","index","_this","$dialog","confirm","message","confirmButtonText","cancelButtonText","then","newImgList","i","length","push","catch","changeImg","dataMap","$this","dsBridge","call","register","rpdata","imgList1","uploadImg","$toast","position","split","evaluateSubmit","join","obj","userid","score","qs","__webpack_require__","$ajax","post","stringify","headers","Content-Type","meta","code","$router","msg","err","components_comment","render","_vm","_h","$createElement","_c","_self","attrs","id","staticClass","staticStyle","color","on","click","$event","back","_v","padding","display","vertical-align","model","callback","$$v","expression","border-top","directives","rawName","width","height","border","placeholder","domProps","input","target","composing","_l","item","src","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/61.8fd5dfaf16fa5cc270ae.js","sourcesContent":["<template>\n\t<div id=\"comment\">\n    <div class=\"header\">\n      <div class=\"van-hairline--bottom van-nav-bar\">\n        <div class=\"van-nav-bar__left\">\n          <i class=\"van-icon van-icon-arrow van-nav-bar__arrow\" style=\"color: #000000 !important;\" @click=\"$router.back(-1)\"></i>\n        </div>\n        <div class=\"van-ellipsis van-nav-bar__title\">发表评论</div>\n        <div class=\"van-nav-bar__right color_40a3f3\" @click=\"evaluateSubmit\">\n          发布\n        </div>\n      </div>\n    </div>\n    <div class=\"login_box\">\n      <div class=\"background_color_ffffff\" style=\"padding: 10px\">\n        <span class=\"font_14\">评价店铺</span>\n        <van-rate v-model=\"value\" style=\"display: inline-block;vertical-align: middle;\"/>\n      </div>\n      <div class=\"background_color_ffffff\" style=\"padding: 10px;border-top: 1px solid #eeeeee\">\n        <textarea v-model=\"content\" class=\"font_14\" placeholder=\"有什么想说的吗?评论给小伙伴看吧!\" style=\"width: 100%;height: 70px;border: none;\"></textarea>\n        <img :src=\"item\" class=\"img_service\" v-for=\"(item,index) in imgList\" @click=\"choice(index)\"/>\n        <img src=\"static/img/icon_tjtp_tjps.png\" class=\"img_service\" @click=\"uploadImg\"/>\n      </div>\n    </div>\n\t</div>\n</template>\n<script>\n\texport default {\n\t\tname: 'comment',\n\t\tdata() {\n\t\t\treturn {\n        value: 3,\n        userId:localStorage.getItem('userId'),\n        orderId : this.$route.query.data.orderid,\n        img:'',\n        content:'',\n        imgList:[],\n\t\t\t}\n\t\t},\n\t\tmethods:{\n      choice(index){\n        this.$dialog.confirm({\n          message: '请选择切换或删除该张图片',\n          confirmButtonText:'删除',\n          cancelButtonText:'切换'\n        }).then(() => {\n          let newImgList = [];\n          for(let i=0;i<this.imgList.length;i++){\n            if(i!=index){\n              newImgList.push(this.imgList[i]);\n            }\n          }\n          this.imgList = newImgList;\n        }).catch(() => {\n          this.changeImg(index)\n        });\n      },\n      changeImg(dataMap){\n        let $this = this;\n        dsBridge.call('uploadImg');\n        dsBridge.register('addImgCallback', function(rpdata) {\n          let imgList1 = [];\n          for(let i =0;i<$this.imgList.length;i++){\n            if(i==dataMap){\n              imgList1.push(rpdata)\n            }else{\n              imgList1.push($this.imgList[i])\n            }\n          }\n          $this.imgList = imgList1;\n        })\n      },\n      uploadImg(){\n        let $this = this;\n        if(this.imgList.length==3){\n          $this.$toast({\n            message: '最多可以上传3张图片!',\n            position: \"bottom\"\n          });\n        }else if(this.imgList.length<3){\n          dsBridge.call('uploadImg');\n          dsBridge.register('addImgCallback', function(rpdata) {\n            // $this.imgList.push(rpdata);\n            if((rpdata.split(',').length+$this.imgList.length)>3){\n              $this.$toast({\n                message: '最多可以上传3张图片!',\n                position: \"bottom\"\n              });\n            }else{\n              for(let i=0;i<rpdata.split(',').length;i++){\n                $this.imgList.push(rpdata.split(',')[i]);\n              }\n            }\n          })\n        }\n      },\n      evaluateSubmit(){\n        this.img = this.imgList.join(',');\n        let $this = this;\n        let obj = {\n          userid: this.userId,\n          orderid: this.orderId,\n          content: this.content,\n          score: this.value,\n          img: this.img,\n        };\n        let qs = require('qs');\n        $this.$ajax.post(\"evaluate/addevaluate\", qs.stringify(obj), {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        })\n        .then(function(rpdata) {\n          if(rpdata.data.meta.code=='200'){\n            $this.$toast({\n              message: '评价完成!',\n              position: \"bottom\"\n            });\n            $this.$router.push('order');\n          }else{\n            $this.$toast({\n              message: rpdata.data.meta.msg,\n              position: \"bottom\"\n            });\n          }\n        })\n        .catch(function(err) {})\n      },\n\t\t}\n\t}\n</script>\n<style scoped>\n  .img_service{\n    width: 32.3%;\n  }\n  .login_box{\n    margin-top: 46px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/comment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"comment\"}},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"van-hairline--bottom van-nav-bar\"},[_c('div',{staticClass:\"van-nav-bar__left\"},[_c('i',{staticClass:\"van-icon van-icon-arrow van-nav-bar__arrow\",staticStyle:{\"color\":\"#000000 !important\"},on:{\"click\":function($event){_vm.$router.back(-1)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"van-ellipsis van-nav-bar__title\"},[_vm._v(\"发表评论\")]),_vm._v(\" \"),_c('div',{staticClass:\"van-nav-bar__right color_40a3f3\",on:{\"click\":_vm.evaluateSubmit}},[_vm._v(\"\\n          发布\\n        \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"login_box\"},[_c('div',{staticClass:\"background_color_ffffff\",staticStyle:{\"padding\":\"10px\"}},[_c('span',{staticClass:\"font_14\"},[_vm._v(\"评价店铺\")]),_vm._v(\" \"),_c('van-rate',{staticStyle:{\"display\":\"inline-block\",\"vertical-align\":\"middle\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"background_color_ffffff\",staticStyle:{\"padding\":\"10px\",\"border-top\":\"1px solid #eeeeee\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],staticClass:\"font_14\",staticStyle:{\"width\":\"100%\",\"height\":\"70px\",\"border\":\"none\"},attrs:{\"placeholder\":\"有什么想说的吗?评论给小伙伴看吧!\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}}),_vm._v(\" \"),_vm._l((_vm.imgList),function(item,index){return _c('img',{staticClass:\"img_service\",attrs:{\"src\":item},on:{\"click\":function($event){_vm.choice(index)}}})}),_vm._v(\" \"),_c('img',{staticClass:\"img_service\",attrs:{\"src\":\"static/img/icon_tjtp_tjps.png\"},on:{\"click\":_vm.uploadImg}})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f1e9081\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/comment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f1e9081\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./comment.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./comment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./comment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f1e9081\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./comment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0f1e9081\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/comment.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}