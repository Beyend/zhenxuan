webpackJsonp([43],{"5Xhl":function(t,i){},SVzp:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={name:"addService",data:function(){return{userId:localStorage.getItem("userId"),title:"",content:"",uname:"",tell:"",type:1,sameimg:"",imgList:[]}},methods:{choice:function(t){var i=this;this.$dialog.confirm({message:"请选择切换或删除该张图片",confirmButtonText:"删除",cancelButtonText:"切换"}).then(function(){for(var e=[],a=0;a<i.imgList.length;a++)a!=t&&e.push(i.imgList[a]);i.imgList=e}).catch(function(){i.changeImg(t)})},changeImg:function(t){var i=this;dsBridge.call("uploadImg"),dsBridge.register("addImgCallback",function(e){for(var a=[],s=0;s<i.imgList.length;s++)s==t?a.push(e):a.push(i.imgList[s]);i.imgList=a})},uploadImg:function(){var t=this;6==this.imgList.length?t.$toast({message:"最多可以上传6张图片!",position:"bottom"}):this.imgList.length<6&&(dsBridge.call("uploadImg"),dsBridge.register("addImgCallback",function(i){if(i.split(",").length+t.imgList.length>6)t.$toast({message:"最多可以上传6张图片!",position:"bottom"});else for(var e=0;e<i.split(",").length;e++)t.imgList.push(i.split(",")[e])}))},addService:function(){this.sameimg=this.imgList.join(",");var t=this,i={userid:t.userId,title:t.title,content:t.content,uname:t.uname,tell:t.tell,type:t.type,sameimg:t.sameimg},a=e("mw3O");t.$ajax.post("samecity/addsamecity",a.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(i){"200"==i.data.meta.code?(t.$toast({message:"发布成功!",position:"bottom"}),t.$router.back(-1)):t.$toast({message:i.data.meta.msg,position:"bottom"})}).catch(function(t){})}}},s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"addService"}},[e("div",{staticClass:"header"},[e("div",{staticClass:"van-hairline--bottom van-nav-bar"},[e("div",{staticClass:"van-nav-bar__left"},[e("i",{staticClass:"van-icon van-icon-arrow van-nav-bar__arrow",staticStyle:{color:"#000000 !important"},on:{click:function(i){t.$router.back(-1)}}})]),t._v(" "),e("div",{staticClass:"van-ellipsis van-nav-bar__title"},[t._v("添加维修")]),t._v(" "),e("div",{staticClass:"van-nav-bar__right",on:{click:t.addService}},[t._v("\n          发布\n        ")])])]),t._v(" "),e("div",{staticClass:"login_box"},[e("div",{staticClass:"login_bar background_color_ffffff login_bottom text-img-center"},[e("img",{staticClass:"width_5",attrs:{src:"static/img/icon_xm_tjps11.png"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.uname,expression:"uname"}],staticClass:"font_14 login_input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.uname},on:{input:function(i){i.target.composing||(t.uname=i.target.value)}}})]),t._v(" "),e("div",{staticClass:"login_bar background_color_ffffff text-img-center"},[e("img",{staticClass:"width_5",attrs:{src:"static/img/icon_shouji--mf11.png"}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tell,expression:"tell"}],staticClass:"font_14 login_input",attrs:{type:"tel",placeholder:"联系方式"},domProps:{value:t.tell},on:{input:function(i){i.target.composing||(t.tell=i.target.value)}}})]),t._v(" "),e("div",{staticClass:"login_bar background_color_ffffff login_top"},[e("span",{staticClass:"img_top_center width_5"},[t._v("标题")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"font_14 login_input",attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.title},on:{input:function(i){i.target.composing||(t.title=i.target.value)}}})]),t._v(" "),e("div",{staticClass:"login_bar background_color_ffffff login_top"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"font_14 login_input1",staticStyle:{width:"100%",height:"54px"},attrs:{type:"text",placeholder:"请输入详细描述"},domProps:{value:t.content},on:{input:function(i){i.target.composing||(t.content=i.target.value)}}})]),t._v(" "),e("div",{staticClass:"login_bar background_color_ffffff login_top"},[t._l(t.imgList,function(i,a){return e("img",{staticClass:"img_service",attrs:{src:i},on:{click:function(i){t.choice(a)}}})}),t._v(" "),e("img",{staticClass:"img_service",attrs:{src:"static/img/icon_tjtp_tjps.png"},on:{click:t.uploadImg}})],2)])])},staticRenderFns:[]};var n=e("VU/8")(a,s,!1,function(t){e("5Xhl")},"data-v-4c29e258",null);i.default=n.exports}});
//# sourceMappingURL=43.fcf782d541e668e29f28.js.map