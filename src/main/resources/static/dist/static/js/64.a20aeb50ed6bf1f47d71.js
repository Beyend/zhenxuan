webpackJsonp([64],{BrNe:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"forgetPwd",data:function(){return{oldphone:"",phoneIn:"",code:"",codeIn:"",newphone:"",count:"",timer:null,show:!0,userId:localStorage.getItem("userId")}},methods:{checkRegister:function(){this.phoneIn==this.oldphone?this.codeIn==this.code?this.newphone?this.forgetPwd():this.$toast({message:"新手机号不可为空",position:"bottom"}):this.$toast({message:"验证码错误",position:"bottom"}):this.$toast({message:"该手机号未发送验证码",position:"bottom"})},getCode:function(){var t=this,e={phone:t.oldphone},n=o("mw3O");t.$ajax.post("user/sendCode",n.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"200"==e.data.meta.code?(t.getCodeIn(),t.codeIn=e.data.data,t.phoneIn=t.oldphone):t.$toast({message:e.data.meta.msg,position:"bottom"})}).catch(function(t){})},getCodeIn:function(){var t=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){t.count>0&&t.count<=60?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)},1e3))},testPhone:function(){this.oldphone&&this.valiPhone(this.oldphone)?this.getCode():this.$toast({message:"请输入正确的手机号",position:"bottom"})},forgetPwd:function(){var t=this,e={userid:this.userId,oldphone:t.oldphone,newphone:t.newphone},n=o("mw3O");t.$ajax.post("user/changephone",n.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){"200"==e.data.meta.code?(t.$toast({message:"修改手机号成功!",position:"bottom"}),t.$router.back(-1)):t.$toast({message:e.data.meta.msg,position:"bottom"})}).catch(function(t){})}}},s={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"changePhone"}},[o("div",{staticClass:"header"},[o("div",{staticClass:"van-hairline--bottom van-nav-bar"},[o("div",{staticClass:"van-nav-bar__left"},[o("i",{staticClass:"van-icon van-icon-arrow van-nav-bar__arrow",staticStyle:{color:"#000000 !important"},on:{click:function(e){t.$router.back(-1)}}})]),t._v(" "),o("div",{staticClass:"van-ellipsis van-nav-bar__title"},[t._v("修改手机号")])])]),t._v(" "),o("div",{staticClass:"login_box"},[o("div",{staticClass:"login_bar background_color_ffffff"},[o("img",{staticClass:"img_top_center width_5",attrs:{src:"static/img/icon_shouji--mf.png"}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.oldphone,expression:"oldphone"}],staticClass:"font_14 login_input",attrs:{type:"number",placeholder:"请输入旧手机号"},domProps:{value:t.oldphone},on:{input:function(e){e.target.composing||(t.oldphone=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login_bar background_color_ffffff login_top"},[o("img",{staticClass:"img_top_center width_5",attrs:{src:"static/img/icon_shouji--mf.png"}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.newphone,expression:"newphone"}],staticClass:"font_14 login_input",attrs:{type:"number",placeholder:"请输入新手机号"},domProps:{value:t.newphone},on:{input:function(e){e.target.composing||(t.newphone=e.target.value)}}})]),t._v(" "),o("div",{staticClass:"login_bar background_color_ffffff login_top"},[o("img",{staticClass:"img_top_center width_5",attrs:{src:"static/img/icon_yanzmm.png"}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"font_14 login_input",attrs:{type:"password",placeholder:"请输入验证码"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"font_12 float_right send_code",on:{click:t.testPhone}},[t._v("获取验证码")]),t._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"font_12 float_right send_code"},[t._v(t._s(t.count)+"s")])]),t._v(" "),o("div",{staticClass:"text_center",staticStyle:{"margin-top":"30px"}},[o("button",{staticClass:"login_button",on:{click:t.checkRegister}},[t._v("确定修改")])])])])},staticRenderFns:[]};var a=o("VU/8")(n,s,!1,function(t){o("bJ07")},"data-v-05d84fd5",null);e.default=a.exports},bJ07:function(t,e){}});
//# sourceMappingURL=64.a20aeb50ed6bf1f47d71.js.map