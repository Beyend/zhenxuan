webpackJsonp([50],{jIjH:function(t,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=s("Fd2+"),a={name:"goods",data:function(){return{goodsInfo:[],goodsNum:0,goodsNumMax:0,goodsList:[],evaluateList:[],userId:localStorage.getItem("userId")}},mounted:function(){this.goodsList=this.$store.state.goodsInfo,console.log(this.goodsList),this.getGoodsInfo(),this.getEvaluateList()},methods:{tel:function(t){dsBridge.call("dialingTel",t)},aaaaa:function(t){Object(i.f)({images:this.goodsInfo.goodslogo.split(",undefined")[0].split(","),showIndicators:!0,startPosition:t,showIndex:!0})},toSeller:function(t){this.$store.commit("setSellerInfo",t),this.$router.push("seller")},buyGoods:function(){if(0!=this.goodsNum){var t=this,o=s("mw3O"),i={goodsid:this.goodsList.goodsid,userid:this.userId,num:this.goodsNum};t.$ajax.post("order/addorder",o.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){"200"==o.data.meta.code?(t.$store.commit("setOrderCheck",o.data.data),t.$router.push("orderCheck")):t.$toast({message:o.data.meta.msg,position:"bottom"})}).catch(function(t){})}else this.$toast({message:"请选择购买数量!",position:"bottom"})},minusNum:function(){0==this.goodsNum?this.$toast({message:"购买数量不得为负数!",position:"bottom"}):this.goodsNum--},addNum:function(){this.goodsNum==this.goodsNumMax?this.$toast({message:"库存上限!",position:"bottom"}):this.goodsNum++},removeCollect:function(){var t=this,o=s("mw3O"),i={goodsid:this.goodsList.goodsid,userid:this.userId};t.$ajax.post("collection/canclecollectiono",o.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){"200"==o.data.meta.code?t.goodsInfo.iscollection="N":t.$toast({message:o.data.meta.msg,position:"bottom"})}).catch(function(t){})},addCollect:function(){var t=this,o=s("mw3O"),i={goodsid:this.goodsList.goodsid,userid:this.userId};t.$ajax.post("collection/addcollection",o.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){"200"==o.data.meta.code?t.goodsInfo.iscollection="Y":t.$toast({message:o.data.meta.msg,position:"bottom"})}).catch(function(t){})},getEvaluateList:function(){var t=this,o=s("mw3O"),i={goodsid:this.goodsList.goodsid,userid:this.userId};t.$ajax.post("evaluate/getevaluatlist",o.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){"200"==o.data.meta.code&&(t.evaluateList=o.data.data)}).catch(function(t){})},getGoodsInfo:function(){var t=this,o=s("mw3O"),i={goodsid:this.goodsList.goodsid,userid:this.userId};t.$ajax.post("goods/getgoodsinfo",o.stringify(i),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(o){o.data.data&&(t.goodsInfo=o.data.data,t.goodsNumMax=o.data.data.num)}).catch(function(t){})},copeText:function(){dsBridge.call("shareUrl","https://www.pgyer.com/DRwB")}}},n={render:function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{attrs:{id:"goods"}},[s("div",{staticClass:"my-bar"},[s("div",{staticClass:"my-bar-left"},[s("div",{staticClass:"arrow-left-con"},[s("van-icon",{attrs:{name:"arrow-left"},nativeOn:{click:function(o){t.$router.go("-1")}}})],1)])]),t._v(" "),s("van-swipe",{staticClass:"goods-swipe",attrs:{autoplay:3e3}},t._l(t.goodsInfo.goodslogo.split(",undefined")[0].split(","),function(o,i){return s("van-swipe-item",{key:i},[s("img",{attrs:{src:o,width:"100%",height:"240px"},on:{click:function(o){t.aaaaa(i)}}})])})),t._v(" "),s("van-cell-group",[s("van-cell",[s("div",{staticClass:"goods-title",staticStyle:{"text-align":"left"}},[s("label",[t._v(t._s(t.goodsInfo.goodsname))])]),t._v(" "),s("div",{staticClass:"font_12"},[s("label",{staticClass:"color_8b8b8b"},[t._v(t._s(t.goodsInfo.introduce))])]),t._v(" "),s("div",{staticClass:"goods-price text_right",staticStyle:{padding:"10px 0"}},[s("label",{staticClass:"color_c10804",staticStyle:{float:"left"}},[t._v("￥"+t._s(t.goodsInfo.price))]),t._v(" "),t.goodsInfo.shop?s("img",{staticStyle:{width:"20px","vertical-align":"middle"},attrs:{src:t.goodsInfo.shop.shoplogo},on:{click:function(o){t.toSeller(t.goodsInfo.shop)}}}):t._e(),t._v(" "),t.goodsInfo.shop?s("label",{staticClass:"color_c10804"},[t._v(t._s(t.goodsInfo.shop.shopname))]):t._e()]),t._v(" "),s("div",{staticClass:"goods-price text_right",staticStyle:{padding:"10px 0"}},[s("label",{staticClass:"color_8b8b8b font_12",staticStyle:{float:"left"}},[t._v("请选择购买数量")]),t._v(" "),s("label",[s("span",{staticClass:"minusNum",on:{click:t.minusNum}},[t._v("-")]),t._v(" "),s("span",[t._v(t._s(t.goodsNum))]),t._v(" "),s("span",{staticClass:"addNum",on:{click:t.addNum}},[t._v("+")])])])])],1),t._v(" "),s("van-cell-group",{staticClass:"goods-cell-group"},[s("van-cell",[s("template",{slot:"title"},[s("span",{staticClass:"van-cell-text"},[t._v("评价("+t._s(t.evaluateList.length)+")")]),t._v(" "),t._l(t.evaluateList,function(o,i){return s("div",[s("div",[s("img",{staticStyle:{width:"30px","vertical-align":"middle"},attrs:{src:"static/img/img_tx1_spxq.png"}}),t._v(" "),s("label",{staticClass:"color_8b8b8b",staticStyle:{"padding-left":"10px"}},[t._v(t._s(o.userid))]),t._v(" "),s("label",{staticClass:"font_12 color_8b8b8b"},[t._v(t._s(o.addtime))]),t._v(" "),s("label",{staticStyle:{float:"right",color:"#fcab52"}},[t._v(t._s(o.score)+"分")])]),t._v(" "),s("div",{staticStyle:{"padding-top":"10px","line-height":"14px"}},[t._v("\n              "+t._s(o.content)+"\n            ")]),t._v(" "),o.img?s("div",t._l(o.img.split(","),function(t,o){return s("img",{key:o,staticStyle:{padding:"2px"},attrs:{src:t,width:"32%"}})})):t._e()])})],2)],2)],1),t._v(" "),s("div",{staticClass:"van-goods-action"},[s("a",{staticClass:"van-hairline van-goods-action-mini-btn"},["N"==t.goodsInfo.iscollection?s("img",{staticClass:"goods-bottom",attrs:{src:"static/img/icon_sc_spxq.png"},on:{click:function(o){return o.stopPropagation(),t.addCollect(o)}}}):t._e(),t._v(" "),"Y"==t.goodsInfo.iscollection?s("img",{staticClass:"goods-bottom",attrs:{src:"static/img/icon_sc_pre_spxq.png"},on:{click:function(o){return o.stopPropagation(),t.removeCollect(o)}}}):t._e(),t._v("\n        收藏\n      ")]),t._v(" "),s("a",{staticClass:"van-hairline van-goods-action-mini-btn",on:{click:t.copeText}},[s("img",{staticClass:"goods-bottom",attrs:{src:"static/img/icon_fx_spxq.png"}}),t._v("\n        分享\n      ")]),t._v(" "),t.goodsInfo.shop?s("a",{staticClass:"van-hairline van-goods-action-mini-btn",on:{click:function(o){t.tel(t.goodsInfo.shop.tel)}}},[s("img",{staticClass:"goods-bottom",attrs:{src:"static/img/icon_kefu_spxq.png"}}),t._v("\n        客服\n      ")]):t._e(),t._v(" "),s("a",{staticClass:"van-button van-button--default van-button--normal van-button--bottom-action van-goods-action-big-btn",staticStyle:{"background-color":"#fcab52"},on:{click:t.buyGoods}},[s("span",{staticClass:"van-button__text"},[t._v("\n          购买\n        ")])])])],1)},staticRenderFns:[]};var e=s("VU/8")(a,n,!1,function(t){s("ujYn")},"data-v-39629bb9",null);o.default=e.exports},ujYn:function(t,o){}});
//# sourceMappingURL=50.de6bed15becd5bd46416.js.map